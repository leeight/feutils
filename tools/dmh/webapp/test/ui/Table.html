<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>ui.Table</title>
  <link rel="stylesheet" type="text/css" href="../../src/css/base.css" />
  <link rel="stylesheet" type="text/css" href="../../src/css/ui-table.css" />
  <script type="text/javascript" src="../../src/base.js"></script>
  <script type="text/javascript">
    goog.require("ui.Page");
    goog.require("ui.Table");
  </script>
  <script type="text/javascript" src="../fet.js"></script>
</head>
<body>
<div id="Main">
  <div ui="type:Table;id:table;fields:@fields;datasource:@datasource"></div>
</div>
<script type="text/javascript">
var model = {
  'fields' : [
    {
      'width' : '100',
      'title' : 'A',
      'content' : function(item) {
        return item['title'];
      }
    },
    {
      'width' : '100',
      'title' : 'B',
      'content' : function(item) {
        return item['status']
      }
    }
  ],
  'datasource' : [
    { 'title' : 'xxx', 'status' : 123 },
    { 'title' : 'yyy', 'status' : 456 }
  ]
};
var page = fet.testControl(model);

function getText(dom) {
  return dom.innerText || dom.textContent || '';
}

function g(id) {
  return document.getElementById(id);
}

test("init", function(){
  expect(4);

  equals(getText(g('tablecell0_0')), 'xxx', 'PASS TEST');
  equals(getText(g('tablecell0_1')), '123', 'PASS TEST');
  equals(getText(g('tablecell1_0')), 'yyy', 'PASS TEST');
  equals(getText(g('tablecell1_1')), '456', 'PASS TEST');
});

test("rebindModel", function(){
  expect(4);

  var table = page.getChild('table');
  table.rebindModel({
    'datasource' : [
      { 'title' : 'xxx', 'status' : 'google' },
      { 'title' : 'yyy', 'status' : 'baidu' }
    ]
  });

  equals(getText(g('tablecell0_0')), 'xxx', 'PASS TEST');
  equals(getText(g('tablecell0_1')), 'google', 'PASS TEST');
  equals(getText(g('tablecell1_0')), 'yyy', 'PASS TEST');
  equals(getText(g('tablecell1_1')), 'baidu', 'PASS TEST');
});

</script>
</body>
</html>
